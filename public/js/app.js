(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _utilities = require('./utilities.js');

var SCREEN_WIDTH = window.innerWidth;
var SCREEN_HEIGHT = window.innerHeight;

var scene = new THREE.Scene();

var camera = new THREE.PerspectiveCamera(75, SCREEN_WIDTH / SCREEN_HEIGHT, 0.1, 1000);

var renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);

renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFShadowMap;

document.body.appendChild(renderer.domElement);

// var geometry = new THREE.BoxGeometry( 1, 1, 2 );
// var material = new THREE.MeshBasicMaterial( { color: 0xBFBFBF } );
// var cube = new THREE.Mesh( geometry, material );
// scene.add( cube );

var charGeometry = new THREE.BoxGeometry(.6, .9, 0.2);
var charMaterial = new THREE.MeshLambertMaterial({ color: 0xEEEEEE });
var chara = new THREE.Mesh(charGeometry, charMaterial);
scene.add(chara);
var startingXPos = -2.5;

var charXPosition = {
  currentX: startingXPos,
  nextX: startingXPos
};
chara.position.set(charXPosition.currentX, -1.2, 0.7);

var jumpRange = {
  upperBound: 1000,
  lowerBound: 0,
  currentPos: 0,
  isJumping: false
};
var movement = {
  walking: false,
  keysUp: false,
  keysDown: false,
  keysLeft: false,
  keysRight: false
};

var groundGeometry = new THREE.BoxGeometry(12, 0.3, 1);
var groundMaterial = new THREE.MeshBasicMaterial({ color: 0xFFFFFF });
var ground = new THREE.Mesh(groundGeometry, groundMaterial);
scene.add(ground);
ground.position.set(0, -2, 0);

var SHADOW_MAP_WIDTH = 2048,
    SHADOW_MAP_HEIGHT = 1024;
var light = new THREE.SpotLight(0xAAAAAA, 1, 0, Math.PI / 2);
// var light = new THREE.SpotLight( 0xAAAAAA );
light.position.set(10, 0, 10);
light.target.position.set(chara.position);

light.castShadow = true;

light.shadow = new THREE.LightShadow(new THREE.PerspectiveCamera(50, 1, 0.1, 1000));
light.shadow.bias = 0.0001;
light.shadow.mapSize.width = SHADOW_MAP_WIDTH;
light.shadow.mapSize.height = SHADOW_MAP_HEIGHT;

scene.add(light);
renderer.setClearColor(0xEEEEEE, 1);

camera.position.z = 5;

var minY = -1.2,
    prevY = minY,
    maxFound = false,
    minFound = false,
    maxY = void 0;

var render = function render() {
  requestAnimationFrame(render);

  // cube.rotation.x += 0.02;
  // cube.rotation.y += 0.0225;
  // cube.rotation.z += 0.0175;

  var thaX = charXPosition.nextX;

  window.addEventListener("keydown", function (event) {
    if (event.keyCode === 39) {
      charXPosition.nextX += .1;
      movement.walking = true;
      movement.keysRight = true;
      // console.log(chara.position.x)
      if (chara.position.x >= 4.8) {
        charXPosition.nextX = 4.8;
      }
    } else if (event.keyCode === 37) {
      charXPosition.nextX += -.1;
      movement.walking = true;
      movement.keysLeft = true;
      // console.log(chara.position.x)
      if (chara.position.x <= -4.795999999999992) {
        charXPosition.nextX = -4.795999999999992;
      }
    } else if (event.keyCode === 38) {
      // console.log(chara.position.y )
      // chara.position.y = -0.4 + 1*Math.sin(dtime/1000);
      // console.log(chara.position.y)
      jumpRange.isJumping = true;
      movement.walking = true;
      movement.keysUp = true;
    }
  });

  window.addEventListener('keyup', function (e) {

    switch (e.keyCode) {
      case 39:
        movement.keysRight = false;
        break;
      case 37:
        movement.keysLeft = false;
        break;
      case 38:
        movement.keysUp = false;
        break;
      case 40:
        movement.keysDown = false;
        break;
      default:
        //no-op
        break;
    }

    if (!movement.keysDown && !movement.keysLeft && !movement.keysUp && !movement.keysRight) {
      movement.walking = false;
    }
  });

  if (jumpRange.isJumping) {

    jumpRange.currentPos++;

    var charaPositionYCalc = minY + 2.5 * Math.sin(jumpRange.currentPos / 10);

    if (typeof maxY !== 'number') maxY = charaPositionYCalc;else maxY = chara.position.y > maxY ? charaPositionYCalc : maxY;

    if (typeof minY !== 'number') minY = charaPositionYCalc;else minY = chara.position.y < minY ? charaPositionYCalc : minY;

    if (charaPositionYCalc > maxY && charaPositionYCalc > prevY || prevY === maxY) {
      maxY = Math.max(prevY, charaPositionYCalc);
      // console.log('oh myh god make it stop', maxY, prevY)
    }

    if (charaPositionYCalc <= minY) {
      chara.position.y = minY;
      jumpRange.isJumping = false;
      jumpRange.currentPos = 0;
    } else {
      chara.position.y = charaPositionYCalc;
    }

    prevY = chara.position.y;
  }

  if (!movement.walking) {
    charXPosition.nextX = chara.position.x;
  } else {
    if (chara.position.x < charXPosition.nextX) {
      chara.position.x += .1;
      if (chara.position.x >= 4.8) {
        chara.position.x = 4.8;
      }
    }

    if (chara.position.x > charXPosition.nextX) {
      chara.position.x -= .1;
      if (chara.position.x <= -4.8) {
        chara.position.x = -4.8;
      }
    }
  }

  renderer.render(scene, camera);
};

render();
var daResize = function daResize() {
  (0, _utilities.handleWindowResize)(camera, renderer);
};

window.addEventListener('resize', daResize);

// export default {
//   SCREEN_WIDTH,
//   SCREEN_HEIGHT,
//   camera,
//   rend
// }

},{"./utilities.js":2}],2:[function(require,module,exports){
"use strict";

// import {SCREEN_WIDTH,SCREEN_HEIGHT,camera,renderer} from './app.js'


var handleWindowResize = function handleWindowResize(cam, rendrr) {
  var camera_ = cam;
  var renderer_ = rendrr;

  var newWidth = window.innerWidth,
      newHeight = window.innerHeight;

  camera_.aspect = newWidth / newHeight;
  camera_.updateProjectionMatrix();
  renderer_.setSize(newWidth, newHeight);
};

module.exports = {
  handleWindowResize: handleWindowResize
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2NyaXB0cy9hcHAuanMiLCJzcmMvc2NyaXB0cy91dGlsaXRpZXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0NBOztBQUVBLElBQUksZUFBZSxPQUFuQixBQUEwQjtBQUMxQixJQUFJLGdCQUFnQixPQUFwQixBQUEyQjs7QUFFM0IsSUFBSSxRQUFRLElBQUksTUFBaEIsQUFBWSxBQUFVOztBQUV0QixJQUFJLFNBQVMsSUFBSSxNQUFKLEFBQVUsa0JBQVYsQUFBNkIsSUFBSSxlQUFqQyxBQUE4QyxlQUE5QyxBQUE2RCxLQUExRSxBQUFhLEFBQWtFOztBQUcvRSxJQUFJLFdBQVcsSUFBSSxNQUFuQixBQUFlLEFBQVU7QUFDekIsU0FBQSxBQUFTLFFBQVMsT0FBbEIsQUFBeUIsWUFBWSxPQUFyQyxBQUE0Qzs7QUFFNUMsU0FBQSxBQUFTLFVBQVQsQUFBbUIsVUFBbkIsQUFBNkI7QUFDN0IsU0FBQSxBQUFTLFVBQVQsQUFBbUIsT0FBTyxNQUExQixBQUFnQzs7QUFFaEMsU0FBQSxBQUFTLEtBQVQsQUFBYyxZQUFhLFNBQTNCLEFBQW9DOztBQUVwQztBQUNBO0FBQ0E7QUFDQTs7QUFFQSxJQUFJLGVBQWUsSUFBSSxNQUFKLEFBQVUsWUFBVixBQUFzQixJQUF0QixBQUEwQixJQUE3QyxBQUFtQixBQUE4QjtBQUNqRCxJQUFJLGVBQWUsSUFBSSxNQUFKLEFBQVUsb0JBQW9CLEVBQUUsT0FBbkQsQUFBbUIsQUFBOEIsQUFBUztBQUMxRCxJQUFJLFFBQVEsSUFBSSxNQUFKLEFBQVUsS0FBVixBQUFlLGNBQTNCLEFBQVksQUFBNkI7QUFDekMsTUFBQSxBQUFNLElBQU4sQUFBVTtBQUNWLElBQUksZUFBZSxDQUFuQixBQUFvQjs7QUFFcEIsSUFBSTtZQUFnQixBQUNQLEFBQ1g7U0FGRixBQUFvQixBQUVaO0FBRlksQUFDbEI7QUFHRixNQUFBLEFBQU0sU0FBTixBQUFlLElBQUksY0FBbkIsQUFBaUMsVUFBVSxDQUEzQyxBQUE0QyxLQUE1QyxBQUFpRDs7QUFFakQsSUFBSTtjQUFZLEFBQ0YsQUFDWjtjQUZjLEFBRUYsQUFDWjtjQUhjLEFBR0YsQUFDWjthQUpGLEFBQWdCLEFBSUg7QUFKRyxBQUNkO0FBS0YsSUFBSTtXQUFXLEFBQ0osQUFDVDtVQUZhLEFBRUwsQUFDUjtZQUhhLEFBR0gsQUFDVjtZQUphLEFBSUgsQUFDVjthQUxGLEFBQWUsQUFLRjtBQUxFLEFBQ2I7O0FBT0YsSUFBSSxpQkFBaUIsSUFBSSxNQUFKLEFBQVUsWUFBVixBQUFzQixJQUF0QixBQUF5QixLQUE5QyxBQUFxQixBQUE2QjtBQUNsRCxJQUFJLGlCQUFpQixJQUFJLE1BQUosQUFBVSxrQkFBbUIsRUFBRSxPQUFwRCxBQUFxQixBQUE2QixBQUFTO0FBQzNELElBQUksU0FBUyxJQUFJLE1BQUosQUFBVSxLQUFWLEFBQWdCLGdCQUE3QixBQUFhLEFBQWdDO0FBQzdDLE1BQUEsQUFBTSxJQUFOLEFBQVc7QUFDWCxPQUFBLEFBQU8sU0FBUCxBQUFnQixJQUFoQixBQUFvQixHQUFHLENBQXZCLEFBQXdCLEdBQXhCLEFBQTJCOztBQUUzQixJQUFJLG1CQUFKLEFBQXVCO0lBQU0sb0JBQTdCLEFBQWlEO0FBQ2pELElBQUksUUFBUSxJQUFJLE1BQUosQUFBVSxVQUFWLEFBQXFCLFVBQXJCLEFBQStCLEdBQS9CLEFBQWtDLEdBQUcsS0FBQSxBQUFLLEtBQXRELEFBQVksQUFBK0M7QUFDM0Q7QUFDQSxNQUFBLEFBQU0sU0FBTixBQUFlLElBQWYsQUFBb0IsSUFBcEIsQUFBd0IsR0FBeEIsQUFBMkI7QUFDM0IsTUFBQSxBQUFNLE9BQU4sQUFBYSxTQUFiLEFBQXNCLElBQUssTUFBM0IsQUFBaUM7O0FBRWpDLE1BQUEsQUFBTSxhQUFOLEFBQW1COztBQUVuQixNQUFBLEFBQU0sU0FBUyxJQUFJLE1BQUosQUFBVSxZQUFhLElBQUksTUFBSixBQUFVLGtCQUFWLEFBQTZCLElBQTdCLEFBQWlDLEdBQWpDLEFBQW9DLEtBQTFFLEFBQWUsQUFBdUIsQUFBeUM7QUFDL0UsTUFBQSxBQUFNLE9BQU4sQUFBYSxPQUFiLEFBQW9CO0FBQ3BCLE1BQUEsQUFBTSxPQUFOLEFBQWEsUUFBYixBQUFxQixRQUFyQixBQUE2QjtBQUM3QixNQUFBLEFBQU0sT0FBTixBQUFhLFFBQWIsQUFBcUIsU0FBckIsQUFBOEI7O0FBRTlCLE1BQUEsQUFBTSxJQUFOLEFBQVc7QUFDWCxTQUFBLEFBQVMsY0FBVCxBQUF3QixVQUF4QixBQUFrQzs7QUFFbEMsT0FBQSxBQUFPLFNBQVAsQUFBZ0IsSUFBaEIsQUFBb0I7O0FBRXBCLElBQUksT0FBTyxDQUFYLEFBQVk7SUFDUixRQURKLEFBQ1k7SUFDUixXQUZKLEFBRWU7SUFDWCxXQUhKLEFBR2U7SUFDWCxZQUpKOztBQU9BLElBQUksU0FBUyxTQUFULEFBQVMsU0FBWSxBQUN2Qjt3QkFBQSxBQUF1QixBQUV2Qjs7QUFDRDtBQUNBO0FBRUM7O01BQUksT0FBTyxjQUFYLEFBQXlCLEFBR3pCOztTQUFBLEFBQU8saUJBQVAsQUFBd0IsV0FBVyxVQUFBLEFBQVMsT0FBTSxBQUNoRDtRQUFJLE1BQUEsQUFBTSxZQUFWLEFBQXNCLElBQUcsQUFDckI7b0JBQUEsQUFBYyxTQUFkLEFBQXVCLEFBQ3ZCO2VBQUEsQUFBUyxVQUFULEFBQW1CLEFBQ25CO2VBQUEsQUFBUyxZQUFULEFBQXFCLEFBQ3ZCO0FBQ0E7VUFBRyxNQUFBLEFBQU0sU0FBTixBQUFlLEtBQWxCLEFBQXVCLEtBQUksQUFDekI7c0JBQUEsQUFBYyxRQUFkLEFBQXNCLEFBQ3ZCO0FBQ0Y7QUFSRCxlQVFVLE1BQUEsQUFBTSxZQUFWLEFBQXNCLElBQUcsQUFDN0I7b0JBQUEsQUFBYyxTQUFTLENBQXZCLEFBQXdCLEFBQ3hCO2VBQUEsQUFBUyxVQUFULEFBQW1CLEFBQ25CO2VBQUEsQUFBUyxXQUFULEFBQW9CLEFBQ3BCO0FBQ0E7VUFBRyxNQUFBLEFBQU0sU0FBTixBQUFlLEtBQUssQ0FBdkIsQUFBd0IsbUJBQWtCLEFBQ3hDO3NCQUFBLEFBQWMsUUFBTyxDQUFyQixBQUFzQixBQUN2QjtBQUNGO0FBUkssS0FBQSxNQVFDLElBQUksTUFBQSxBQUFNLFlBQVYsQUFBc0IsSUFBRyxBQUM5QjtBQUNBO0FBQ0E7QUFDQTtnQkFBQSxBQUFVLFlBQVYsQUFBc0IsQUFDdEI7ZUFBQSxBQUFTLFVBQVQsQUFBbUIsQUFDbkI7ZUFBQSxBQUFTLFNBQVQsQUFBa0IsQUFDbkI7QUFDSjtBQXpCQyxBQTJCRjs7U0FBQSxBQUFPLGlCQUFQLEFBQXdCLFNBQVMsVUFBQSxBQUFTLEdBQUUsQUFFMUM7O1lBQVEsRUFBUixBQUFVLEFBQ1I7V0FBQSxBQUFLLEFBQ0g7aUJBQUEsQUFBUyxZQUFULEFBQXFCLEFBQ3JCO0FBQ0Y7V0FBQSxBQUFLLEFBQ0g7aUJBQUEsQUFBUyxXQUFULEFBQW9CLEFBQ3BCO0FBQ0Y7V0FBQSxBQUFLLEFBQ0g7aUJBQUEsQUFBUyxTQUFULEFBQWtCLEFBQ2xCO0FBQ0Y7V0FBQSxBQUFLLEFBQ0g7aUJBQUEsQUFBUyxXQUFULEFBQW9CLEFBQ3BCO0FBQ0Y7QUFDRTtBQUNBO0FBZkosQUFtQkE7OztRQUFHLENBQUMsU0FBRCxBQUFVLFlBQVksQ0FBQyxTQUF2QixBQUFnQyxZQUNoQyxDQUFDLFNBREQsQUFDVSxVQUFVLENBQUMsU0FEeEIsQUFDaUMsV0FBVSxBQUN6QztlQUFBLEFBQVMsVUFBVCxBQUFtQixBQUNwQjtBQUVGO0FBMUJELEFBNEJDOztNQUFHLFVBQUgsQUFBYSxXQUFVLEFBRXBCOztjQUFBLEFBQVUsQUFFVjs7UUFBSSxxQkFBcUIsT0FBTyxNQUFJLEtBQUEsQUFBSyxJQUFJLFVBQUEsQUFBVSxhQUF2RCxBQUFvQyxBQUE4QixBQUdsRTs7UUFBRyxPQUFBLEFBQU8sU0FBVixBQUFtQixVQUFVLE9BQTdCLEFBQTZCLEFBQU8sd0JBQzdCLE9BQU8sTUFBQSxBQUFNLFNBQU4sQUFBZSxJQUFmLEFBQW1CLE9BQW5CLEFBQTBCLHFCQUFqQyxBQUFzRCxBQUU3RDs7UUFBRyxPQUFBLEFBQU8sU0FBVixBQUFtQixVQUFVLE9BQTdCLEFBQTZCLEFBQU8sd0JBQzdCLE9BQU8sTUFBQSxBQUFNLFNBQU4sQUFBZSxJQUFmLEFBQW1CLE9BQW5CLEFBQTJCLHFCQUFsQyxBQUF1RCxBQUc5RDs7UUFBRyxxQkFBQSxBQUFxQixRQUFRLHFCQUE3QixBQUFrRCxTQUFTLFVBQTlELEFBQXdFLE1BQU8sQUFDN0U7YUFBTyxLQUFBLEFBQUssSUFBTCxBQUFTLE9BQWhCLEFBQU8sQUFBZ0IsQUFDdkI7QUFDRDtBQUVEOztRQUFHLHNCQUFILEFBQXlCLE1BQU0sQUFDN0I7WUFBQSxBQUFNLFNBQU4sQUFBZSxJQUFmLEFBQW1CLEFBQ25CO2dCQUFBLEFBQVUsWUFBVixBQUFzQixBQUN0QjtnQkFBQSxBQUFVLGFBQVYsQUFBdUIsQUFDeEI7QUFKRCxXQUlPLEFBQ0w7WUFBQSxBQUFNLFNBQU4sQUFBZSxJQUFmLEFBQW1CLEFBQ3BCO0FBRUQ7O1lBQVEsTUFBQSxBQUFNLFNBQWQsQUFBdUIsQUFDeEI7QUFFRDs7TUFBRyxDQUFDLFNBQUosQUFBYSxTQUFRLEFBQ25CO2tCQUFBLEFBQWMsUUFBUSxNQUFBLEFBQU0sU0FBNUIsQUFBcUMsQUFFdEM7QUFIRCxTQUdPLEFBQ0w7UUFBRyxNQUFBLEFBQU0sU0FBTixBQUFlLElBQUssY0FBdkIsQUFBcUMsT0FBTSxBQUN6QztZQUFBLEFBQU0sU0FBTixBQUFlLEtBQWYsQUFBb0IsQUFDcEI7VUFBRyxNQUFBLEFBQU0sU0FBTixBQUFlLEtBQWxCLEFBQXVCLEtBQUksQUFDekI7Y0FBQSxBQUFNLFNBQU4sQUFBZSxJQUFmLEFBQW1CLEFBQ3BCO0FBQ0Y7QUFFRDs7UUFBRyxNQUFBLEFBQU0sU0FBTixBQUFlLElBQUssY0FBdkIsQUFBcUMsT0FBTSxBQUN6QztZQUFBLEFBQU0sU0FBTixBQUFlLEtBQWYsQUFBb0IsQUFDcEI7VUFBRyxNQUFBLEFBQU0sU0FBTixBQUFlLEtBQUssQ0FBdkIsQUFBd0IsS0FBSSxBQUMxQjtjQUFBLEFBQU0sU0FBTixBQUFlLElBQUksQ0FBbkIsQUFBb0IsQUFDckI7QUFDRjtBQUNGO0FBSUQ7O1dBQUEsQUFBUyxPQUFULEFBQWdCLE9BQWhCLEFBQXVCLEFBQ3hCO0FBckhEOztBQXVIQTtBQUNBLElBQUksV0FBVyxTQUFYLEFBQVcsV0FBVSxBQUN2QjtxQ0FBQSxBQUFtQixRQUFuQixBQUEyQixBQUM1QjtBQUZEOztBQUlBLE9BQUEsQUFBTyxpQkFBUCxBQUF3QixVQUF4QixBQUFrQzs7QUFNbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3hOQTs7O0FBR0EsSUFBSSxxQkFBcUIsU0FBckIsQUFBcUIsbUJBQUEsQUFBUyxLQUFULEFBQWMsUUFBTyxBQUM1QztNQUFJLFVBQUosQUFBYyxBQUNkO01BQUksWUFBSixBQUFnQixBQUVoQjs7TUFBSSxXQUFXLE9BQWYsQUFBc0I7TUFDbEIsWUFBWSxPQURoQixBQUN1QixBQUV2Qjs7VUFBQSxBQUFRLFNBQVMsV0FBakIsQUFBNEIsQUFDNUI7VUFBQSxBQUFRLEFBQ1I7WUFBQSxBQUFVLFFBQVYsQUFBbUIsVUFBbkIsQUFBNkIsQUFHOUI7QUFaRDs7QUFlQSxPQUFBLEFBQU87c0JBQVAsQUFBaUI7QUFBQSxBQUNmIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlxuaW1wb3J0IHtoYW5kbGVXaW5kb3dSZXNpemV9IGZyb20gJy4vdXRpbGl0aWVzLmpzJ1xuXG52YXIgU0NSRUVOX1dJRFRIID0gd2luZG93LmlubmVyV2lkdGg7XG52YXIgU0NSRUVOX0hFSUdIVCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxudmFyIHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG5cbnZhciBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoIDc1LCBTQ1JFRU5fV0lEVEgvU0NSRUVOX0hFSUdIVCwgMC4xLCAxMDAwICk7XG5cblxudmFyIHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoKTtcbnJlbmRlcmVyLnNldFNpemUoIHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQgKTtcblxucmVuZGVyZXIuc2hhZG93TWFwLmVuYWJsZWQgPSB0cnVlO1xucmVuZGVyZXIuc2hhZG93TWFwLnR5cGUgPSBUSFJFRS5QQ0ZTaGFkb3dNYXA7XG5cbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIHJlbmRlcmVyLmRvbUVsZW1lbnQgKTtcblxuLy8gdmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KCAxLCAxLCAyICk7XG4vLyB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoIHsgY29sb3I6IDB4QkZCRkJGIH0gKTtcbi8vIHZhciBjdWJlID0gbmV3IFRIUkVFLk1lc2goIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuLy8gc2NlbmUuYWRkKCBjdWJlICk7XG5cbnZhciBjaGFyR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoLjYsIC45LCAwLjIpO1xudmFyIGNoYXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsKHsgY29sb3I6IDB4RUVFRUVFIH0pXG52YXIgY2hhcmEgPSBuZXcgVEhSRUUuTWVzaChjaGFyR2VvbWV0cnksIGNoYXJNYXRlcmlhbCk7XG5zY2VuZS5hZGQoY2hhcmEpO1xudmFyIHN0YXJ0aW5nWFBvcyA9IC0yLjVcblxudmFyIGNoYXJYUG9zaXRpb24gPSB7XG4gIGN1cnJlbnRYIDogc3RhcnRpbmdYUG9zLFxuICBuZXh0WDpzdGFydGluZ1hQb3Ncbn1cbmNoYXJhLnBvc2l0aW9uLnNldChjaGFyWFBvc2l0aW9uLmN1cnJlbnRYLCAtMS4yLCAwLjcpO1xuXG52YXIganVtcFJhbmdlID0ge1xuICB1cHBlckJvdW5kOiAxMDAwLFxuICBsb3dlckJvdW5kOiAwLFxuICBjdXJyZW50UG9zOiAwLFxuICBpc0p1bXBpbmc6IGZhbHNlXG59XG52YXIgbW92ZW1lbnQgPSB7XG4gIHdhbGtpbmc6IGZhbHNlLFxuICBrZXlzVXA6IGZhbHNlLFxuICBrZXlzRG93bjogZmFsc2UsXG4gIGtleXNMZWZ0OiBmYWxzZSxcbiAga2V5c1JpZ2h0OiBmYWxzZVxufVxuXG52YXIgZ3JvdW5kR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMTIsMC4zLDEpO1xudmFyIGdyb3VuZE1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKCB7IGNvbG9yOiAweEZGRkZGRiB9ICk7XG52YXIgZ3JvdW5kID0gbmV3IFRIUkVFLk1lc2goIGdyb3VuZEdlb21ldHJ5LCBncm91bmRNYXRlcmlhbCApO1xuc2NlbmUuYWRkKCBncm91bmQgKTtcbmdyb3VuZC5wb3NpdGlvbi5zZXQoMCwgLTIsIDApO1xuXG52YXIgU0hBRE9XX01BUF9XSURUSCA9IDIwNDgsIFNIQURPV19NQVBfSEVJR0hUID0gMTAyNDtcbnZhciBsaWdodCA9IG5ldyBUSFJFRS5TcG90TGlnaHQoIDB4QUFBQUFBLCAxLCAwLCBNYXRoLlBJIC8gMiApO1xuLy8gdmFyIGxpZ2h0ID0gbmV3IFRIUkVFLlNwb3RMaWdodCggMHhBQUFBQUEgKTtcbmxpZ2h0LnBvc2l0aW9uLnNldCggMTAsIDAsIDEwICk7XG5saWdodC50YXJnZXQucG9zaXRpb24uc2V0KCBjaGFyYS5wb3NpdGlvbiApO1xuXG5saWdodC5jYXN0U2hhZG93ID0gdHJ1ZTtcblxubGlnaHQuc2hhZG93ID0gbmV3IFRIUkVFLkxpZ2h0U2hhZG93KCBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoIDUwLCAxLCAwLjEsIDEwMDAgKSApO1xubGlnaHQuc2hhZG93LmJpYXMgPSAwLjAwMDE7XG5saWdodC5zaGFkb3cubWFwU2l6ZS53aWR0aCA9IFNIQURPV19NQVBfV0lEVEg7XG5saWdodC5zaGFkb3cubWFwU2l6ZS5oZWlnaHQgPSBTSEFET1dfTUFQX0hFSUdIVDtcblxuc2NlbmUuYWRkKCBsaWdodCApO1xucmVuZGVyZXIuc2V0Q2xlYXJDb2xvciggMHhFRUVFRUUsIDEpO1xuXG5jYW1lcmEucG9zaXRpb24ueiA9IDU7XG5cbmxldCBtaW5ZID0gLTEuMixcbiAgICBwcmV2WSA9IG1pblksXG4gICAgbWF4Rm91bmQgPSBmYWxzZSxcbiAgICBtaW5Gb3VuZCA9IGZhbHNlLFxuICAgIG1heFlcblxuXG52YXIgcmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoIHJlbmRlciApO1xuXG4gIC8vIGN1YmUucm90YXRpb24ueCArPSAwLjAyO1xuXHQvLyBjdWJlLnJvdGF0aW9uLnkgKz0gMC4wMjI1O1xuXHQvLyBjdWJlLnJvdGF0aW9uLnogKz0gMC4wMTc1O1xuXG4gIGxldCB0aGFYID0gY2hhclhQb3NpdGlvbi5uZXh0WFxuXG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uKGV2ZW50KXtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzkpe1xuICAgICAgICBjaGFyWFBvc2l0aW9uLm5leHRYICs9IC4xXG4gICAgICAgIG1vdmVtZW50LndhbGtpbmcgPSB0cnVlXG4gICAgICAgIG1vdmVtZW50LmtleXNSaWdodCA9IHRydWVcbiAgICAgIC8vIGNvbnNvbGUubG9nKGNoYXJhLnBvc2l0aW9uLngpXG4gICAgICBpZihjaGFyYS5wb3NpdGlvbi54ID49IDQuOCl7XG4gICAgICAgIGNoYXJYUG9zaXRpb24ubmV4dFggPSA0LjhcbiAgICAgIH1cbiAgICB9ZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzcpe1xuICAgICAgY2hhclhQb3NpdGlvbi5uZXh0WCArPSAtLjFcbiAgICAgIG1vdmVtZW50LndhbGtpbmcgPSB0cnVlXG4gICAgICBtb3ZlbWVudC5rZXlzTGVmdCA9IHRydWVcbiAgICAgIC8vIGNvbnNvbGUubG9nKGNoYXJhLnBvc2l0aW9uLngpXG4gICAgICBpZihjaGFyYS5wb3NpdGlvbi54IDw9IC00Ljc5NTk5OTk5OTk5OTk5Mil7XG4gICAgICAgIGNoYXJYUG9zaXRpb24ubmV4dFg9IC00Ljc5NTk5OTk5OTk5OTk5MjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT09IDM4KXtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGNoYXJhLnBvc2l0aW9uLnkgKVxuICAgICAgLy8gY2hhcmEucG9zaXRpb24ueSA9IC0wLjQgKyAxKk1hdGguc2luKGR0aW1lLzEwMDApO1xuICAgICAgLy8gY29uc29sZS5sb2coY2hhcmEucG9zaXRpb24ueSlcbiAgICAgIGp1bXBSYW5nZS5pc0p1bXBpbmcgPSB0cnVlXG4gICAgICBtb3ZlbWVudC53YWxraW5nID0gdHJ1ZVxuICAgICAgbW92ZW1lbnQua2V5c1VwID0gdHJ1ZVxuICAgIH1cbn0pXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGUpe1xuXG4gIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgY2FzZSAzOTpcbiAgICAgIG1vdmVtZW50LmtleXNSaWdodCA9IGZhbHNlXG4gICAgICBicmVhaztcbiAgICBjYXNlIDM3OlxuICAgICAgbW92ZW1lbnQua2V5c0xlZnQgPSBmYWxzZVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzODpcbiAgICAgIG1vdmVtZW50LmtleXNVcCA9IGZhbHNlXG4gICAgICBicmVhaztcbiAgICBjYXNlIDQwOlxuICAgICAgbW92ZW1lbnQua2V5c0Rvd24gPSBmYWxzZVxuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIC8vbm8tb3BcbiAgICAgIGJyZWFrO1xuICB9XG5cblxuICBpZighbW92ZW1lbnQua2V5c0Rvd24gJiYgIW1vdmVtZW50LmtleXNMZWZ0ICYmXG4gICAgICFtb3ZlbWVudC5rZXlzVXAgJiYgIW1vdmVtZW50LmtleXNSaWdodCl7XG4gICAgbW92ZW1lbnQud2Fsa2luZyA9IGZhbHNlXG4gIH1cblxufSlcblxuXHRpZihqdW1wUmFuZ2UuaXNKdW1waW5nKXtcblxuICAgIGp1bXBSYW5nZS5jdXJyZW50UG9zKytcblxuICAgIGxldCBjaGFyYVBvc2l0aW9uWUNhbGMgPSBtaW5ZICsgMi41Kk1hdGguc2luKGp1bXBSYW5nZS5jdXJyZW50UG9zLzEwKVxuXG5cbiAgICBpZih0eXBlb2YgbWF4WSAhPT0gJ251bWJlcicpIG1heFkgPSBjaGFyYVBvc2l0aW9uWUNhbGNcbiAgICAgIGVsc2UgbWF4WSA9IGNoYXJhLnBvc2l0aW9uLnkgPiBtYXhZID8gY2hhcmFQb3NpdGlvbllDYWxjIDogbWF4WVxuXG4gICAgaWYodHlwZW9mIG1pblkgIT09ICdudW1iZXInKSBtaW5ZID0gY2hhcmFQb3NpdGlvbllDYWxjXG4gICAgICBlbHNlIG1pblkgPSBjaGFyYS5wb3NpdGlvbi55IDwgbWluWSA/ICBjaGFyYVBvc2l0aW9uWUNhbGMgOiBtaW5ZXG5cblxuICAgIGlmKGNoYXJhUG9zaXRpb25ZQ2FsYyA+IG1heFkgJiYgY2hhcmFQb3NpdGlvbllDYWxjID4gcHJldlkgfHwgcHJldlkgPT09IG1heFkgICl7XG4gICAgICBtYXhZID0gTWF0aC5tYXgocHJldlksIGNoYXJhUG9zaXRpb25ZQ2FsYylcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdvaCBteWggZ29kIG1ha2UgaXQgc3RvcCcsIG1heFksIHByZXZZKVxuICAgIH1cblxuICAgIGlmKGNoYXJhUG9zaXRpb25ZQ2FsYyA8PSBtaW5ZICl7XG4gICAgICBjaGFyYS5wb3NpdGlvbi55ID0gbWluWVxuICAgICAganVtcFJhbmdlLmlzSnVtcGluZyA9IGZhbHNlXG4gICAgICBqdW1wUmFuZ2UuY3VycmVudFBvcyA9IDBcbiAgICB9IGVsc2Uge1xuICAgICAgY2hhcmEucG9zaXRpb24ueSA9IGNoYXJhUG9zaXRpb25ZQ2FsY1xuICAgIH1cblxuICAgIHByZXZZID0gY2hhcmEucG9zaXRpb24ueVxuICB9XG5cbiAgaWYoIW1vdmVtZW50LndhbGtpbmcpe1xuICAgIGNoYXJYUG9zaXRpb24ubmV4dFggPSBjaGFyYS5wb3NpdGlvbi54XG5cbiAgfSBlbHNlIHtcbiAgICBpZihjaGFyYS5wb3NpdGlvbi54ICA8IGNoYXJYUG9zaXRpb24ubmV4dFgpe1xuICAgICAgY2hhcmEucG9zaXRpb24ueCArPSAuMVxuICAgICAgaWYoY2hhcmEucG9zaXRpb24ueCA+PSA0Ljgpe1xuICAgICAgICBjaGFyYS5wb3NpdGlvbi54ID0gNC44XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYoY2hhcmEucG9zaXRpb24ueCAgPiBjaGFyWFBvc2l0aW9uLm5leHRYKXtcbiAgICAgIGNoYXJhLnBvc2l0aW9uLnggLT0gLjFcbiAgICAgIGlmKGNoYXJhLnBvc2l0aW9uLnggPD0gLTQuOCl7XG4gICAgICAgIGNoYXJhLnBvc2l0aW9uLnggPSAtNC44XG4gICAgICB9XG4gICAgfVxuICB9XG5cblxuXG4gIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTtcbn07XG5cbnJlbmRlcigpO1xudmFyIGRhUmVzaXplID0gZnVuY3Rpb24oKXtcbiAgaGFuZGxlV2luZG93UmVzaXplKGNhbWVyYSwgcmVuZGVyZXIpXG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkYVJlc2l6ZSApXG5cblxuXG5cblxuLy8gZXhwb3J0IGRlZmF1bHQge1xuLy8gICBTQ1JFRU5fV0lEVEgsXG4vLyAgIFNDUkVFTl9IRUlHSFQsXG4vLyAgIGNhbWVyYSxcbi8vICAgcmVuZFxuLy8gfVxuIiwiLy8gaW1wb3J0IHtTQ1JFRU5fV0lEVEgsU0NSRUVOX0hFSUdIVCxjYW1lcmEscmVuZGVyZXJ9IGZyb20gJy4vYXBwLmpzJ1xuXG5cbnZhciBoYW5kbGVXaW5kb3dSZXNpemUgPSBmdW5jdGlvbihjYW0sIHJlbmRycil7XG4gIGxldCBjYW1lcmFfID0gY2FtO1xuICBsZXQgcmVuZGVyZXJfID0gcmVuZHJyXG5cbiAgbGV0IG5ld1dpZHRoID0gd2luZG93LmlubmVyV2lkdGgsXG4gICAgICBuZXdIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cbiAgY2FtZXJhXy5hc3BlY3QgPSBuZXdXaWR0aCAvIG5ld0hlaWdodDtcbiAgY2FtZXJhXy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gIHJlbmRlcmVyXy5zZXRTaXplKCBuZXdXaWR0aCwgbmV3SGVpZ2h0ICk7XG5cblxufVxuXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBoYW5kbGVXaW5kb3dSZXNpemVcbn1cbiJdfQ==
