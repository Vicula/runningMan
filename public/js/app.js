(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var scene = new THREE.Scene();
var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);

var renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// var geometry = new THREE.BoxGeometry( 1, 1, 2 );
// var material = new THREE.MeshBasicMaterial( { color: 0xBFBFBF } );
// var cube = new THREE.Mesh( geometry, material );
// scene.add( cube );

var charGeometry = new THREE.BoxGeometry(.6, .9, 0.2);
var charMaterial = new THREE.MeshBasicMaterial({ color: 0xA0A0A0 });
var chara = new THREE.Mesh(charGeometry, charMaterial);
scene.add(chara);
var startingXPos = -2.5;

var charXPosition = {
  currentX: startingXPos,
  nextX: startingXPos
};
chara.position.set(charXPosition.currentX, -1.2, 0.7);

var jumpRange = {
  upperBound: 1000,
  lowerBound: 0,
  currentPos: 0,
  isJumping: false
};

var movement = {
  walking: false,
  keysUp: false,
  keysDown: false,
  keysLeft: false,
  keysRight: false
};

var groundGeometry = new THREE.BoxGeometry(12, 0.3, 1);
var groundMaterial = new THREE.MeshBasicMaterial({ color: 0xFFFFFF });
var ground = new THREE.Mesh(groundGeometry, groundMaterial);
scene.add(ground);
ground.position.set(0, -2, 0);
var light = new THREE.PointLight(0x000000);
light.position.set(10, 0, 10);
scene.add(light);
renderer.setClearColor(0xEEEEEE, 1);

camera.position.z = 5;

var minY = -1.2,
    prevY = minY,
    maxFound = false,
    minFound = false,
    maxY = void 0;

var render = function render() {
  requestAnimationFrame(render);

  // cube.rotation.x += 0.02;
  // cube.rotation.y += 0.0225;
  // cube.rotation.z += 0.0175;

  var thaX = charXPosition.nextX;

  window.addEventListener("keydown", function (event) {
    if (event.keyCode === 39) {
      charXPosition.nextX += .1;
      movement.walking = true;
      movement.keysRight = true;
      // console.log(chara.position.x)
      if (chara.position.x >= 4.8) {
        charXPosition.nextX = 4.8;
      }
    } else if (event.keyCode === 37) {
      charXPosition.nextX += -.1;
      movement.walking = true;
      movement.keysLeft = true;
      // console.log(chara.position.x)
      if (chara.position.x <= -4.795999999999992) {
        charXPosition.nextX = -4.795999999999992;
      }
    } else if (event.keyCode === 38) {
      // console.log(chara.position.y )
      // chara.position.y = -0.4 + 1*Math.sin(dtime/1000);
      // console.log(chara.position.y)
      jumpRange.isJumping = true;
      movement.walking = true;
      movement.keysUp = true;
    }
  });

  window.addEventListener('keyup', function (e) {

    if (!movement.keysDown && !movement.keysLeft && !movement.keysUp && !movement.keysRighy) {
      movement.walking = false;
    }

    movement.keysDown = false;
    movement.keysUp = false;
    movement.keysLeft = false;
    movement.keysRight = false;
  });

  if (jumpRange.isJumping) {

    jumpRange.currentPos++;

    var charaPositionYCalc = minY + 2.5 * Math.sin(jumpRange.currentPos / 10);

    if (typeof maxY !== 'number') maxY = charaPositionYCalc;else maxY = chara.position.y > maxY ? charaPositionYCalc : maxY;

    if (typeof minY !== 'number') minY = charaPositionYCalc;else minY = chara.position.y < minY ? charaPositionYCalc : minY;

    if (charaPositionYCalc > maxY && charaPositionYCalc > prevY || prevY === maxY) {
      maxY = Math.max(prevY, charaPositionYCalc);
      // console.log('oh myh god make it stop', maxY, prevY)
    }

    if (charaPositionYCalc <= minY) {
      chara.position.y = minY;
      jumpRange.isJumping = false;
      jumpRange.currentPos = 0;
    } else {
      chara.position.y = charaPositionYCalc;
    }

    prevY = chara.position.y;
  }

  if (!movement.walking) {
    charXPosition.nextX = chara.position.x;
  } else {
    if (chara.position.x < charXPosition.nextX) {
      chara.position.x += .1;
      if (chara.position.x >= 4.8) {
        chara.position.x = 4.8;
      }
    }

    if (chara.position.x > charXPosition.nextX) {
      chara.position.x -= .1;
      if (chara.position.x <= -4.8) {
        chara.position.x = -4.8;
      }
    }
  }

  renderer.render(scene, camera);
};

render();

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2NyaXB0cy9hcHAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLElBQUksUUFBUSxJQUFJLE1BQWhCLEFBQVksQUFBVTtBQUN0QixJQUFJLFNBQVMsSUFBSSxNQUFKLEFBQVUsa0JBQVYsQUFBNkIsSUFBSSxPQUFBLEFBQU8sYUFBVyxPQUFuRCxBQUEwRCxhQUExRCxBQUF1RSxLQUFwRixBQUFhLEFBQTRFOztBQUV6RixJQUFJLFdBQVcsSUFBSSxNQUFuQixBQUFlLEFBQVU7QUFDekIsU0FBQSxBQUFTLFFBQVMsT0FBbEIsQUFBeUIsWUFBWSxPQUFyQyxBQUE0QztBQUM1QyxTQUFBLEFBQVMsS0FBVCxBQUFjLFlBQWEsU0FBM0IsQUFBb0M7O0FBRXBDO0FBQ0E7QUFDQTtBQUNBOztBQUVBLElBQUksZUFBZSxJQUFJLE1BQUosQUFBVSxZQUFWLEFBQXNCLElBQXRCLEFBQTBCLElBQTdDLEFBQW1CLEFBQThCO0FBQ2pELElBQUksZUFBZSxJQUFJLE1BQUosQUFBVSxrQkFBa0IsRUFBRSxPQUFqRCxBQUFtQixBQUE0QixBQUFTO0FBQ3hELElBQUksUUFBUSxJQUFJLE1BQUosQUFBVSxLQUFWLEFBQWUsY0FBM0IsQUFBWSxBQUE2QjtBQUN6QyxNQUFBLEFBQU0sSUFBTixBQUFVO0FBQ1YsSUFBSSxlQUFlLENBQW5CLEFBQW9COztBQUVwQixJQUFJO1lBQWdCLEFBQ1AsQUFDWDtTQUZGLEFBQW9CLEFBRVo7QUFGWSxBQUNsQjtBQUdGLE1BQUEsQUFBTSxTQUFOLEFBQWUsSUFBSSxjQUFuQixBQUFpQyxVQUFVLENBQTNDLEFBQTRDLEtBQTVDLEFBQWlEOztBQUVqRCxJQUFJO2NBQVksQUFDRixBQUNaO2NBRmMsQUFFRixBQUNaO2NBSGMsQUFHRixBQUNaO2FBSkYsQUFBZ0IsQUFJSDtBQUpHLEFBQ2Q7O0FBT0YsSUFBSTtXQUFXLEFBQ0osQUFDVDtVQUZhLEFB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SUFBSyxjQUF2QixBQUFxQyxPQUFNLEFBQ3pDO1lBQUEsQUFBTSxTQUFOLEFBQWUsS0FBZixBQUFvQixBQUNwQjtVQUFHLE1BQUEsQUFBTSxTQUFOLEFBQWUsS0FBSyxDQUF2QixBQUF3QixLQUFJLEFBQzFCO2NBQUEsQUFBTSxTQUFOLEFBQWUsSUFBSSxDQUFuQixBQUFvQixBQUNyQjtBQUNGO0FBQ0Y7QUFJRDs7V0FBQSxBQUFTLE9BQVQsQUFBZ0IsT0FBaEIsQUFBdUIsQUFDeEI7QUF2R0Q7O0FBeUdBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsInZhciBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xudmFyIGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSggNzUsIHdpbmRvdy5pbm5lcldpZHRoL3dpbmRvdy5pbm5lckhlaWdodCwgMC4xLCAxMDAwICk7XG5cbnZhciByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKCk7XG5yZW5kZXJlci5zZXRTaXplKCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0ICk7XG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCByZW5kZXJlci5kb21FbGVtZW50ICk7XG5cbi8vIHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSggMSwgMSwgMiApO1xuLy8gdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKCB7IGNvbG9yOiAweEJGQkZCRiB9ICk7XG4vLyB2YXIgY3ViZSA9IG5ldyBUSFJFRS5NZXNoKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcbi8vIHNjZW5lLmFkZCggY3ViZSApO1xuXG52YXIgY2hhckdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KC42LCAuOSwgMC4yKTtcbnZhciBjaGFyTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoeyBjb2xvcjogMHhBMEEwQTAgfSlcbnZhciBjaGFyYSA9IG5ldyBUSFJFRS5NZXNoKGNoYXJHZW9tZXRyeSwgY2hhck1hdGVyaWFsKTtcbnNjZW5lLmFkZChjaGFyYSk7XG52YXIgc3RhcnRpbmdYUG9zID0gLTIuNVxuXG52YXIgY2hhclhQb3NpdGlvbiA9IHtcbiAgY3VycmVudFggOiBzdGFydGluZ1hQb3MsXG4gIG5leHRYOnN0YXJ0aW5nWFBvc1xufVxuY2hhcmEucG9zaXRpb24uc2V0KGNoYXJYUG9zaXRpb24uY3VycmVudFgsIC0xLjIsIDAuNyk7XG5cbnZhciBqdW1wUmFuZ2UgPSB7XG4gIHVwcGVyQm91bmQ6IDEwMDAsXG4gIGxvd2VyQm91bmQ6IDAsXG4gIGN1cnJlbnRQb3M6IDAsXG4gIGlzSnVtcGluZzogZmFsc2Vcbn1cblxuXG52YXIgbW92ZW1lbnQgPSB7XG4gIHdhbGtpbmc6IGZhbHNlLFxuICBrZXlzVXA6IGZhbHNlLFxuICBrZXlzRG93bjogZmFsc2UsXG4gIGtleXNMZWZ0OiBmYWxzZSxcbiAga2V5c1JpZ2h0OiBmYWxzZVxufVxuXG5cbnZhciBncm91bmRHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgxMiwwLjMsMSk7XG52YXIgZ3JvdW5kTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoIHsgY29sb3I6IDB4RkZGRkZGIH0gKTtcbnZhciBncm91bmQgPSBuZXcgVEhSRUUuTWVzaCggZ3JvdW5kR2VvbWV0cnksIGdyb3VuZE1hdGVyaWFsICk7XG5zY2VuZS5hZGQoIGdyb3VuZCApO1xuZ3JvdW5kLnBvc2l0aW9uLnNldCgwLCAtMiwgMCk7XG52YXIgbGlnaHQgPSBuZXcgVEhSRUUuUG9pbnRMaWdodCggMHgwMDAwMDAgKTtcbmxpZ2h0LnBvc2l0aW9uLnNldCggMTAsIDAsIDEwICk7XG5zY2VuZS5hZGQoIGxpZ2h0ICk7XG5yZW5kZXJlci5zZXRDbGVhckNvbG9yKCAweEVFRUVFRSwgMSk7XG5cbmNhbWVyYS5wb3NpdGlvbi56ID0gNTtcblxubGV0IG1pblkgPSAtMS4yLFxuICAgIHByZXZZID0gbWluWSxcbiAgICBtYXhGb3VuZCA9IGZhbHNlLFxuICAgIG1pbkZvdW5kID0gZmFsc2UsXG4gICAgbWF4WVxuXG5cbnZhciByZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSggcmVuZGVyICk7XG5cbiAgLy8gY3ViZS5yb3RhdGlvbi54ICs9IDAuMDI7XG5cdC8vIGN1YmUucm90YXRpb24ueSArPSAwLjAyMjU7XG5cdC8vIGN1YmUucm90YXRpb24ueiArPSAwLjAxNzU7XG5cbiAgbGV0IHRoYVggPSBjaGFyWFBvc2l0aW9uLm5leHRYXG5cblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24oZXZlbnQpe1xuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAzOSl7XG4gICAgICAgIGNoYXJYUG9zaXRpb24ubmV4dFggKz0gLjFcbiAgICAgICAgbW92ZW1lbnQud2Fsa2luZyA9IHRydWVcbiAgICAgICAgbW92ZW1lbnQua2V5c1JpZ2h0ID0gdHJ1ZVxuICAgICAgLy8gY29uc29sZS5sb2coY2hhcmEucG9zaXRpb24ueClcbiAgICAgIGlmKGNoYXJhLnBvc2l0aW9uLnggPj0gNC44KXtcbiAgICAgICAgY2hhclhQb3NpdGlvbi5uZXh0WCA9IDQuOFxuICAgICAgfVxuICAgIH1lbHNlIGlmIChldmVudC5rZXlDb2RlID09PSAzNyl7XG4gICAgICBjaGFyWFBvc2l0aW9uLm5leHRYICs9IC0uMVxuICAgICAgbW92ZW1lbnQud2Fsa2luZyA9IHRydWVcbiAgICAgIG1vdmVtZW50LmtleXNMZWZ0ID0gdHJ1ZVxuICAgICAgLy8gY29uc29sZS5sb2coY2hhcmEucG9zaXRpb24ueClcbiAgICAgIGlmKGNoYXJhLnBvc2l0aW9uLnggPD0gLTQuNzk1OTk5OTk5OTk5OTkyKXtcbiAgICAgICAgY2hhclhQb3NpdGlvbi5uZXh0WD0gLTQuNzk1OTk5OTk5OTk5OTkyO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzgpe1xuICAgICAgLy8gY29uc29sZS5sb2coY2hhcmEucG9zaXRpb24ueSApXG4gICAgICAvLyBjaGFyYS5wb3NpdGlvbi55ID0gLTAuNCArIDEqTWF0aC5zaW4oZHRpbWUvMTAwMCk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhjaGFyYS5wb3NpdGlvbi55KVxuICAgICAganVtcFJhbmdlLmlzSnVtcGluZyA9IHRydWVcbiAgICAgIG1vdmVtZW50LndhbGtpbmcgPSB0cnVlXG4gICAgICBtb3ZlbWVudC5rZXlzVXAgPSB0cnVlXG4gICAgfVxufSlcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24oZSl7XG5cblxuICBpZighbW92ZW1lbnQua2V5c0Rvd24gJiYgIW1vdmVtZW50LmtleXNMZWZ0ICYmXG4gICAgICFtb3ZlbWVudC5rZXlzVXAgJiYgIW1vdmVtZW50LmtleXNSaWdoeSl7XG4gICAgbW92ZW1lbnQud2Fsa2luZyA9IGZhbHNlXG4gIH1cblxuICBtb3ZlbWVudC5rZXlzRG93biA9IGZhbHNlXG4gIG1vdmVtZW50LmtleXNVcCA9IGZhbHNlXG4gIG1vdmVtZW50LmtleXNMZWZ0ID0gZmFsc2VcbiAgbW92ZW1lbnQua2V5c1JpZ2h0ID0gZmFsc2Vcbn0pXG5cblx0aWYoanVtcFJhbmdlLmlzSnVtcGluZyl7XG5cbiAgICBqdW1wUmFuZ2UuY3VycmVudFBvcysrXG5cbiAgICBsZXQgY2hhcmFQb3NpdGlvbllDYWxjID0gbWluWSArIDIuNSpNYXRoLnNpbihqdW1wUmFuZ2UuY3VycmVudFBvcy8xMClcblxuXG4gICAgaWYodHlwZW9mIG1heFkgIT09ICdudW1iZXInKSBtYXhZID0gY2hhcmFQb3NpdGlvbllDYWxjXG4gICAgICBlbHNlIG1heFkgPSBjaGFyYS5wb3NpdGlvbi55ID4gbWF4WSA/IGNoYXJhUG9zaXRpb25ZQ2FsYyA6IG1heFlcblxuICAgIGlmKHR5cGVvZiBtaW5ZICE9PSAnbnVtYmVyJykgbWluWSA9IGNoYXJhUG9zaXRpb25ZQ2FsY1xuICAgICAgZWxzZSBtaW5ZID0gY2hhcmEucG9zaXRpb24ueSA8IG1pblkgPyAgY2hhcmFQb3NpdGlvbllDYWxjIDogbWluWVxuXG5cbiAgICBpZihjaGFyYVBvc2l0aW9uWUNhbGMgPiBtYXhZICYmIGNoYXJhUG9zaXRpb25ZQ2FsYyA+IHByZXZZIHx8IHByZXZZID09PSBtYXhZICApe1xuICAgICAgbWF4WSA9IE1hdGgubWF4KHByZXZZLCBjaGFyYVBvc2l0aW9uWUNhbGMpXG4gICAgICAvLyBjb25zb2xlLmxvZygnb2ggbXloIGdvZCBtYWtlIGl0IHN0b3AnLCBtYXhZLCBwcmV2WSlcbiAgICB9XG5cbiAgICBpZihjaGFyYVBvc2l0aW9uWUNhbGMgPD0gbWluWSApe1xuICAgICAgY2hhcmEucG9zaXRpb24ueSA9IG1pbllcbiAgICAgIGp1bXBSYW5nZS5pc0p1bXBpbmcgPSBmYWxzZVxuICAgICAganVtcFJhbmdlLmN1cnJlbnRQb3MgPSAwXG4gICAgfSBlbHNlIHtcbiAgICAgIGNoYXJhLnBvc2l0aW9uLnkgPSBjaGFyYVBvc2l0aW9uWUNhbGNcbiAgICB9XG5cbiAgICBwcmV2WSA9IGNoYXJhLnBvc2l0aW9uLnlcbiAgfVxuXG4gIGlmKCFtb3ZlbWVudC53YWxraW5nKXtcbiAgICBjaGFyWFBvc2l0aW9uLm5leHRYID0gY2hhcmEucG9zaXRpb24ueFxuXG4gIH0gZWxzZSB7XG4gICAgaWYoY2hhcmEucG9zaXRpb24ueCAgPCBjaGFyWFBvc2l0aW9uLm5leHRYKXtcbiAgICAgIGNoYXJhLnBvc2l0aW9uLnggKz0gLjFcbiAgICAgIGlmKGNoYXJhLnBvc2l0aW9uLnggPj0gNC44KXtcbiAgICAgICAgY2hhcmEucG9zaXRpb24ueCA9IDQuOFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmKGNoYXJhLnBvc2l0aW9uLnggID4gY2hhclhQb3NpdGlvbi5uZXh0WCl7XG4gICAgICBjaGFyYS5wb3NpdGlvbi54IC09IC4xXG4gICAgICBpZihjaGFyYS5wb3NpdGlvbi54IDw9IC00Ljgpe1xuICAgICAgICBjaGFyYS5wb3NpdGlvbi54ID0gLTQuOFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG5cblxuICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7XG59O1xuXG5yZW5kZXIoKTtcbiJdfQ==
