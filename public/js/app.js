(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _utilities = require('./utilities.js');

var SCREEN_WIDTH = window.innerWidth;
var SCREEN_HEIGHT = window.innerHeight;

var scene = new THREE.Scene();

var camera = new THREE.PerspectiveCamera(75, SCREEN_WIDTH / SCREEN_HEIGHT, 0.1, 1000);

var ambient = new THREE.AmbientLight(0x444444);
scene.add(ambient);

var renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);

renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFShadowMap;

document.body.appendChild(renderer.domElement);

// var geometry = new THREE.BoxGeometry( 1, 1, 2 );
// var material = new THREE.MeshBasicMaterial( { color: 0xBFBFBF } );
// var cube = new THREE.Mesh( geometry, material );
// scene.add( cube );

var charGeometry = new THREE.ConeGeometry(.2, .7, 50, 1, false, 10, 2 * 3.14);
var charMaterial = new THREE.MeshLambertMaterial({ color: 0x6a6a6a });
var chara = new THREE.Mesh(charGeometry, charMaterial);
scene.add(chara);

chara.castShadow = true;
// chara.receiveShadow = true;
var startingXPos = -1.2;

var charXPosition = {
  currentX: startingXPos,
  nextX: startingXPos
};
chara.position.set(charXPosition.currentX, -2.3, 0.2);

var jumpRange = {
  upperBound: 1000,
  lowerBound: 0,
  currentPos: 0,
  isJumping: false
};
var movement = {
  walking: false,
  keysUp: false,
  keysDown: false,
  keysLeft: false,
  keysRight: false
};

var groundGeometry = new THREE.BoxGeometry(12, 0.3, 1);
var groundMaterial = new THREE.MeshLambertMaterial({ color: 0xFFFFFF });
var ground = new THREE.Mesh(groundGeometry, groundMaterial);
ground.castShadow = false;
ground.receiveShadow = true;
scene.add(ground);
ground.position.set(0, -2.9, 0);

var SHADOW_MAP_WIDTH = 2048,
    SHADOW_MAP_HEIGHT = 1024;
var light = new THREE.SpotLight(0xFFFFFF, 1, 0, Math.PI / 2);
// var light = new THREE.SpotLight( 0xAAAAAA );
light.position.set(5, 3, 10);
light.target.position.set(chara.position);

light.castShadow = true;

light.shadow = new THREE.LightShadow(new THREE.PerspectiveCamera(50, 1, 0.1, 1000));
light.shadow.bias = 0.0001;
light.shadow.mapSize.width = SHADOW_MAP_WIDTH;
light.shadow.mapSize.height = SHADOW_MAP_HEIGHT;

scene.add(light);
renderer.setClearColor(0xEEEEEE, 1);

camera.position.z = 5;

var minY = -2.3,
    prevY = minY,
    maxFound = false,
    minFound = false,
    maxY = void 0;

//
// var geometry = new THREE.ConeGeometry( .2, .7, 50, 1,false,10,2*3.14 );
// var material = new THREE.MeshLambertMaterial( { color: 0x6a6a6a } );
// var cone = new THREE.Mesh( geometry, material );
// scene.add( cone );
// cone.position.set(-1.2, -2.3, 0.2);
// cone.castShadow = true;


var headGeometry = new THREE.ConeGeometry(.15, .5, 3, 1, false, 10, 2 * 3.14);
var headMaterial = new THREE.MeshLambertMaterial({ color: 0x6a6a6a });
var head = new THREE.Mesh(headGeometry, headMaterial);
scene.add(head);
head.position.set(-1.01, -2.15, 0.22);
head.rotation.x = 1.9;
head.rotation.y = 2.8;
head.rotation.z = 1.3;

var render = function render() {
  requestAnimationFrame(render);

  // head.rotation.x += 0.02;
  // head.rotation.y += 0.0225;
  // head.rotation.z += 0.0175;

  var thaX = charXPosition.nextX;

  window.addEventListener("keydown", function (event) {
    if (event.keyCode === 39) {
      charXPosition.nextX += .1;
      movement.walking = true;
      movement.keysRight = true;
      // console.log(chara.position.x)
      if (chara.position.x >= 4.8) {
        charXPosition.nextX = 4.8;
      }
    } else if (event.keyCode === 37) {
      charXPosition.nextX += -.1;
      movement.walking = true;
      movement.keysLeft = true;
      // console.log(chara.position.x)
      if (chara.position.x <= -4.795999999999992) {
        charXPosition.nextX = -4.795999999999992;
      }
    } else if (event.keyCode === 38) {
      // console.log(chara.position.y )
      // chara.position.y = -0.4 + 1*Math.sin(dtime/1000);
      // console.log(chara.position.y)
      jumpRange.isJumping = true;
      movement.walking = true;
      movement.keysUp = true;
    }
  });

  window.addEventListener('keyup', function (e) {

    switch (e.keyCode) {
      case 39:
        movement.keysRight = false;
        break;
      case 37:
        movement.keysLeft = false;
        break;
      case 38:
        movement.keysUp = false;
        break;
      case 40:
        movement.keysDown = false;
        break;
      default:
        //no-op
        break;
    }

    if (!movement.keysDown && !movement.keysLeft && !movement.keysUp && !movement.keysRight) {
      movement.walking = false;
    }
  });

  if (jumpRange.isJumping) {

    jumpRange.currentPos++;

    var charaPositionYCalc = minY + 2.5 * Math.sin(jumpRange.currentPos / 10);

    if (typeof maxY !== 'number') maxY = charaPositionYCalc;else maxY = chara.position.y > maxY ? charaPositionYCalc : maxY;

    if (typeof minY !== 'number') minY = charaPositionYCalc;else minY = chara.position.y < minY ? charaPositionYCalc : minY;

    if (charaPositionYCalc > maxY && charaPositionYCalc > prevY || prevY === maxY) {
      maxY = Math.max(prevY, charaPositionYCalc);
      // console.log('oh myh god make it stop', maxY, prevY)
    }

    if (charaPositionYCalc <= minY) {
      chara.position.y = minY;
      jumpRange.isJumping = false;
      jumpRange.currentPos = 0;
    } else {
      chara.position.y = charaPositionYCalc;
    }

    prevY = chara.position.y;
  }

  if (!movement.walking) {
    charXPosition.nextX = chara.position.x;
  } else {
    if (chara.position.x < charXPosition.nextX) {
      // chara.position.x += .1
      // head.position.x +=.1
      // if(chara.position.x >= 4.8){
      //   chara.position.x = 4.8
      // }
      if (chara.position.x >= 4.8) {} else {
        chara.position.x += .1;
        head.position.x += .1;
      }
    }

    if (chara.position.x > charXPosition.nextX) {
      // chara.position.x -= .1
      //   head.position.x -=.1
      // if(chara.position.x <= -4.8){
      //   chara.position.x = -4.8
      // }
      if (chara.position.x <= -4.8) {} else {
        chara.position.x -= .1;
        head.position.x -= .1;
      }
    }
  }

  renderer.render(scene, camera);
};

render();
var daResize = function daResize() {
  (0, _utilities.handleWindowResize)(camera, renderer);
};

window.addEventListener('resize', daResize);

},{"./utilities.js":2}],2:[function(require,module,exports){
"use strict";

// import {SCREEN_WIDTH,SCREEN_HEIGHT,camera,renderer} from './app.js'


var handleWindowResize = function handleWindowResize(cam, rendrr) {
  var camera_ = cam;
  var renderer_ = rendrr;

  var newWidth = window.innerWidth,
      newHeight = window.innerHeight;

  camera_.aspect = newWidth / newHeight;
  camera_.updateProjectionMatrix();
  renderer_.setSize(newWidth, newHeight);
};

module.exports = {
  handleWindowResize: handleWindowResize
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2NyaXB0cy9hcHAuanMiLCJzcmMvc2NyaXB0cy91dGlsaXRpZXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0NBOztBQUVBLElBQUksZUFBZSxPQUFuQixBQUEwQjtBQUMxQixJQUFJLGdCQUFnQixPQUFwQixBQUEyQjs7QUFFM0IsSUFBSSxRQUFRLElBQUksTUFBaEIsQUFBWSxBQUFVOztBQUV0QixJQUFJLFNBQVMsSUFBSSxNQUFKLEFBQVUsa0JBQVYsQUFBNkIsSUFBSSxlQUFqQyxBQUE4QyxlQUE5QyxBQUE2RCxLQUExRSxBQUFhLEFBQWtFOztBQUUvRSxJQUFJLFVBQVUsSUFBSSxNQUFKLEFBQVUsYUFBeEIsQUFBYyxBQUF3QjtBQUN0QyxNQUFBLEFBQU0sSUFBTixBQUFXOztBQUdYLElBQUksV0FBVyxJQUFJLE1BQW5CLEFBQWUsQUFBVTtBQUN6QixTQUFBLEFBQVMsUUFBUyxPQUFsQixBQUF5QixZQUFZLE9BQXJDLEFBQTRDOztBQUU1QyxTQUFBLEFBQVMsVUFBVCxBQUFtQixVQUFuQixBQUE2QjtBQUM3QixTQUFBLEFBQVMsVUFBVCxBQUFtQixPQUFPLE1BQTFCLEFBQWdDOztBQUVoQyxTQUFBLEFBQVMsS0FBVCxBQUFjLFlBQWEsU0FBM0IsQUFBb0M7O0FBSXBDO0FBQ0E7QUFDQTtBQUNBOztBQUVBLElBQUksZUFBZSxJQUFJLE1BQUosQUFBVSxhQUFWLEFBQXdCLElBQXhCLEFBQTRCLElBQTVCLEFBQWdDLElBQWhDLEFBQW9DLEdBQXBDLEFBQXNDLE9BQXRDLEFBQTRDLElBQUcsSUFBbEUsQUFBbUIsQUFBaUQ7QUFDcEUsSUFBSSxlQUFlLElBQUksTUFBSixBQUFVLG9CQUFvQixFQUFFLE9BQW5ELEFBQW1CLEFBQThCLEFBQVM7QUFDMUQsSUFBSSxRQUFRLElBQUksTUFBSixBQUFVLEtBQVYsQUFBZSxjQUEzQixBQUFZLEFBQTZCO0FBQ3pD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QUFGRDs7QUFJQSxPQUFBLEFBQU8saUJBQVAsQUFBd0IsVUFBeEIsQUFBa0M7Ozs7O0FDaFFsQzs7O0FBR0EsSUFBSSxxQkFBcUIsU0FBckIsQUFBcUIsbUJBQUEsQUFBUyxLQUFULEFBQWMsUUFBTyxBQUM1QztNQUFJLFVBQUosQUFBYyxBQUNkO01BQUksWUFBSixBQUFnQixBQUVoQjs7TUFBSSxXQUFXLE9BQWYsQUFBc0I7TUFDbEIsWUFBWSxPQURoQixBQUN1QixBQUV2Qjs7VUFBQSxBQUFRLFNBQVMsV0FBakIsQUFBNEIsQUFDNUI7VUFBQSxBQUFRLEFBQ1I7WUFBQSxBQUFVLFFBQVYsQUFBbUIsVUFBbkIsQUFBNkIsQUFHOUI7QUFaRDs7QUFlQSxPQUFBLEFBQU87c0JBQVAsQUFBaUI7QUFBQSxBQUNmIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlxuaW1wb3J0IHtoYW5kbGVXaW5kb3dSZXNpemV9IGZyb20gJy4vdXRpbGl0aWVzLmpzJ1xuXG52YXIgU0NSRUVOX1dJRFRIID0gd2luZG93LmlubmVyV2lkdGg7XG52YXIgU0NSRUVOX0hFSUdIVCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxudmFyIHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG5cbnZhciBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoIDc1LCBTQ1JFRU5fV0lEVEgvU0NSRUVOX0hFSUdIVCwgMC4xLCAxMDAwICk7XG5cbnZhciBhbWJpZW50ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCggMHg0NDQ0NDQgKTtcbnNjZW5lLmFkZCggYW1iaWVudCApO1xuXG5cbnZhciByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKCk7XG5yZW5kZXJlci5zZXRTaXplKCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0ICk7XG5cbnJlbmRlcmVyLnNoYWRvd01hcC5lbmFibGVkID0gdHJ1ZTtcbnJlbmRlcmVyLnNoYWRvd01hcC50eXBlID0gVEhSRUUuUENGU2hhZG93TWFwO1xuXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCByZW5kZXJlci5kb21FbGVtZW50ICk7XG5cblxuXG4vLyB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoIDEsIDEsIDIgKTtcbi8vIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCggeyBjb2xvcjogMHhCRkJGQkYgfSApO1xuLy8gdmFyIGN1YmUgPSBuZXcgVEhSRUUuTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG4vLyBzY2VuZS5hZGQoIGN1YmUgKTtcblxudmFyIGNoYXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5Db25lR2VvbWV0cnkoIC4yLCAuNywgNTAsIDEsZmFsc2UsMTAsMiozLjE0ICk7XG52YXIgY2hhck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwoeyBjb2xvcjogMHg2YTZhNmEgfSlcbnZhciBjaGFyYSA9IG5ldyBUSFJFRS5NZXNoKGNoYXJHZW9tZXRyeSwgY2hhck1hdGVyaWFsKTtcbnNjZW5lLmFkZChjaGFyYSk7XG5cbmNoYXJhLmNhc3RTaGFkb3cgPSB0cnVlO1xuLy8gY2hhcmEucmVjZWl2ZVNoYWRvdyA9IHRydWU7XG52YXIgc3RhcnRpbmdYUG9zID0gLTEuMlxuXG52YXIgY2hhclhQb3NpdGlvbiA9IHtcbiAgY3VycmVudFggOiBzdGFydGluZ1hQb3MsXG4gIG5leHRYOnN0YXJ0aW5nWFBvc1xufVxuY2hhcmEucG9zaXRpb24uc2V0KGNoYXJYUG9zaXRpb24uY3VycmVudFgsIC0yLjMsIDAuMik7XG5cbnZhciBqdW1wUmFuZ2UgPSB7XG4gIHVwcGVyQm91bmQ6IDEwMDAsXG4gIGxvd2VyQm91bmQ6IDAsXG4gIGN1cnJlbnRQb3M6IDAsXG4gIGlzSnVtcGluZzogZmFsc2Vcbn1cbnZhciBtb3ZlbWVudCA9IHtcbiAgd2Fsa2luZzogZmFsc2UsXG4gIGtleXNVcDogZmFsc2UsXG4gIGtleXNEb3duOiBmYWxzZSxcbiAga2V5c0xlZnQ6IGZhbHNlLFxuICBrZXlzUmlnaHQ6IGZhbHNlXG59XG5cbnZhciBncm91bmRHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgxMiwwLjMsMSk7XG52YXIgZ3JvdW5kTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbCggeyBjb2xvcjogMHhGRkZGRkYgfSApO1xudmFyIGdyb3VuZCA9IG5ldyBUSFJFRS5NZXNoKCBncm91bmRHZW9tZXRyeSwgZ3JvdW5kTWF0ZXJpYWwgKTtcbmdyb3VuZC5jYXN0U2hhZG93ID0gZmFsc2U7XG5ncm91bmQucmVjZWl2ZVNoYWRvdyA9IHRydWU7XG5zY2VuZS5hZGQoIGdyb3VuZCApO1xuZ3JvdW5kLnBvc2l0aW9uLnNldCgwLCAtMi45LCAwKTtcblxudmFyIFNIQURPV19NQVBfV0lEVEggPSAyMDQ4LCBTSEFET1dfTUFQX0hFSUdIVCA9IDEwMjQ7XG52YXIgbGlnaHQgPSBuZXcgVEhSRUUuU3BvdExpZ2h0KCAweEZGRkZGRiwgMSwgMCwgTWF0aC5QSSAvIDIgKTtcbi8vIHZhciBsaWdodCA9IG5ldyBUSFJFRS5TcG90TGlnaHQoIDB4QUFBQUFBICk7XG5saWdodC5wb3NpdGlvbi5zZXQoIDUsIDMsIDEwICk7XG5saWdodC50YXJnZXQucG9zaXRpb24uc2V0KCBjaGFyYS5wb3NpdGlvbiApO1xuXG5saWdodC5jYXN0U2hhZG93ID0gdHJ1ZTtcblxubGlnaHQuc2hhZG93ID0gbmV3IFRIUkVFLkxpZ2h0U2hhZG93KCBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoIDUwLCAxLCAwLjEsIDEwMDAgKSApO1xubGlnaHQuc2hhZG93LmJpYXMgPSAwLjAwMDE7XG5saWdodC5zaGFkb3cubWFwU2l6ZS53aWR0aCA9IFNIQURPV19NQVBfV0lEVEg7XG5saWdodC5zaGFkb3cubWFwU2l6ZS5oZWlnaHQgPSBTSEFET1dfTUFQX0hFSUdIVDtcblxuc2NlbmUuYWRkKCBsaWdodCApO1xucmVuZGVyZXIuc2V0Q2xlYXJDb2xvciggMHhFRUVFRUUsIDEpO1xuXG5jYW1lcmEucG9zaXRpb24ueiA9IDU7XG5cbmxldCBtaW5ZID0gLTIuMyxcbiAgICBwcmV2WSA9IG1pblksXG4gICAgbWF4Rm91bmQgPSBmYWxzZSxcbiAgICBtaW5Gb3VuZCA9IGZhbHNlLFxuICAgIG1heFlcblxuXG5cbi8vXG4vLyB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQ29uZUdlb21ldHJ5KCAuMiwgLjcsIDUwLCAxLGZhbHNlLDEwLDIqMy4xNCApO1xuLy8gdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwoIHsgY29sb3I6IDB4NmE2YTZhIH0gKTtcbi8vIHZhciBjb25lID0gbmV3IFRIUkVFLk1lc2goIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuLy8gc2NlbmUuYWRkKCBjb25lICk7XG4vLyBjb25lLnBvc2l0aW9uLnNldCgtMS4yLCAtMi4zLCAwLjIpO1xuLy8gY29uZS5jYXN0U2hhZG93ID0gdHJ1ZTtcblxuXG5cbnZhciBoZWFkR2VvbWV0cnkgPSBuZXcgVEhSRUUuQ29uZUdlb21ldHJ5KCAuMTUsIC41LCAzLCAxLGZhbHNlLDEwLDIqMy4xNCApO1xudmFyIGhlYWRNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsKCB7IGNvbG9yOiAweDZhNmE2YSB9ICk7XG52YXIgaGVhZCA9IG5ldyBUSFJFRS5NZXNoKGhlYWRHZW9tZXRyeSwgaGVhZE1hdGVyaWFsKTtcbnNjZW5lLmFkZChoZWFkKVxuaGVhZC5wb3NpdGlvbi5zZXQoLTEuMDEsIC0yLjE1LCAwLjIyKTtcbmhlYWQucm90YXRpb24ueCA9IDEuOTtcbmhlYWQucm90YXRpb24ueSA9IDIuODtcbmhlYWQucm90YXRpb24ueiA9IDEuM1xuXG5cblxuXG5cblxuXG52YXIgcmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoIHJlbmRlciApO1xuXG4gIC8vIGhlYWQucm90YXRpb24ueCArPSAwLjAyO1xuXHQvLyBoZWFkLnJvdGF0aW9uLnkgKz0gMC4wMjI1O1xuXHQvLyBoZWFkLnJvdGF0aW9uLnogKz0gMC4wMTc1O1xuXG4gIGxldCB0aGFYID0gY2hhclhQb3NpdGlvbi5uZXh0WFxuXG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uKGV2ZW50KXtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzkpe1xuICAgICAgICBjaGFyWFBvc2l0aW9uLm5leHRYICs9IC4xXG4gICAgICAgIG1vdmVtZW50LndhbGtpbmcgPSB0cnVlXG4gICAgICAgIG1vdmVtZW50LmtleXNSaWdodCA9IHRydWVcbiAgICAgIC8vIGNvbnNvbGUubG9nKGNoYXJhLnBvc2l0aW9uLngpXG4gICAgICBpZihjaGFyYS5wb3NpdGlvbi54ID49IDQuOCl7XG4gICAgICAgIGNoYXJYUG9zaXRpb24ubmV4dFggPSA0LjhcbiAgICAgIH1cbiAgICB9ZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzcpe1xuICAgICAgY2hhclhQb3NpdGlvbi5uZXh0WCArPSAtLjFcbiAgICAgIG1vdmVtZW50LndhbGtpbmcgPSB0cnVlXG4gICAgICBtb3ZlbWVudC5rZXlzTGVmdCA9IHRydWVcbiAgICAgIC8vIGNvbnNvbGUubG9nKGNoYXJhLnBvc2l0aW9uLngpXG4gICAgICBpZihjaGFyYS5wb3NpdGlvbi54IDw9IC00Ljc5NTk5OTk5OTk5OTk5Mil7XG4gICAgICAgIGNoYXJYUG9zaXRpb24ubmV4dFg9IC00Ljc5NTk5OTk5OTk5OTk5MjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT09IDM4KXtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGNoYXJhLnBvc2l0aW9uLnkgKVxuICAgICAgLy8gY2hhcmEucG9zaXRpb24ueSA9IC0wLjQgKyAxKk1hdGguc2luKGR0aW1lLzEwMDApO1xuICAgICAgLy8gY29uc29sZS5sb2coY2hhcmEucG9zaXRpb24ueSlcbiAgICAgIGp1bXBSYW5nZS5pc0p1bXBpbmcgPSB0cnVlXG4gICAgICBtb3ZlbWVudC53YWxraW5nID0gdHJ1ZVxuICAgICAgbW92ZW1lbnQua2V5c1VwID0gdHJ1ZVxuICAgIH1cbn0pXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGUpe1xuXG4gIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgY2FzZSAzOTpcbiAgICAgIG1vdmVtZW50LmtleXNSaWdodCA9IGZhbHNlXG4gICAgICBicmVhaztcbiAgICBjYXNlIDM3OlxuICAgICAgbW92ZW1lbnQua2V5c0xlZnQgPSBmYWxzZVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzODpcbiAgICAgIG1vdmVtZW50LmtleXNVcCA9IGZhbHNlXG4gICAgICBicmVhaztcbiAgICBjYXNlIDQwOlxuICAgICAgbW92ZW1lbnQua2V5c0Rvd24gPSBmYWxzZVxuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIC8vbm8tb3BcbiAgICAgIGJyZWFrO1xuICB9XG5cblxuICBpZighbW92ZW1lbnQua2V5c0Rvd24gJiYgIW1vdmVtZW50LmtleXNMZWZ0ICYmXG4gICAgICFtb3ZlbWVudC5rZXlzVXAgJiYgIW1vdmVtZW50LmtleXNSaWdodCl7XG4gICAgbW92ZW1lbnQud2Fsa2luZyA9IGZhbHNlXG4gIH1cblxufSlcblxuXHRpZihqdW1wUmFuZ2UuaXNKdW1waW5nKXtcblxuICAgIGp1bXBSYW5nZS5jdXJyZW50UG9zKytcblxuICAgIGxldCBjaGFyYVBvc2l0aW9uWUNhbGMgPSBtaW5ZICsgMi41Kk1hdGguc2luKGp1bXBSYW5nZS5jdXJyZW50UG9zLzEwKVxuXG5cbiAgICBpZih0eXBlb2YgbWF4WSAhPT0gJ251bWJlcicpIG1heFkgPSBjaGFyYVBvc2l0aW9uWUNhbGNcbiAgICAgIGVsc2UgbWF4WSA9IGNoYXJhLnBvc2l0aW9uLnkgPiBtYXhZID8gY2hhcmFQb3NpdGlvbllDYWxjIDogbWF4WVxuXG4gICAgaWYodHlwZW9mIG1pblkgIT09ICdudW1iZXInKSBtaW5ZID0gY2hhcmFQb3NpdGlvbllDYWxjXG4gICAgICBlbHNlIG1pblkgPSBjaGFyYS5wb3NpdGlvbi55IDwgbWluWSA/ICBjaGFyYVBvc2l0aW9uWUNhbGMgOiBtaW5ZXG5cblxuICAgIGlmKGNoYXJhUG9zaXRpb25ZQ2FsYyA+IG1heFkgJiYgY2hhcmFQb3NpdGlvbllDYWxjID4gcHJldlkgfHwgcHJldlkgPT09IG1heFkgICl7XG4gICAgICBtYXhZID0gTWF0aC5tYXgocHJldlksIGNoYXJhUG9zaXRpb25ZQ2FsYylcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdvaCBteWggZ29kIG1ha2UgaXQgc3RvcCcsIG1heFksIHByZXZZKVxuICAgIH1cblxuICAgIGlmKGNoYXJhUG9zaXRpb25ZQ2FsYyA8PSBtaW5ZICl7XG4gICAgICBjaGFyYS5wb3NpdGlvbi55ID0gbWluWVxuICAgICAganVtcFJhbmdlLmlzSnVtcGluZyA9IGZhbHNlXG4gICAgICBqdW1wUmFuZ2UuY3VycmVudFBvcyA9IDBcbiAgICB9IGVsc2Uge1xuICAgICAgY2hhcmEucG9zaXRpb24ueSA9IGNoYXJhUG9zaXRpb25ZQ2FsY1xuICAgIH1cblxuICAgIHByZXZZID0gY2hhcmEucG9zaXRpb24ueVxuICB9XG5cbiAgaWYoIW1vdmVtZW50LndhbGtpbmcpe1xuICAgIGNoYXJYUG9zaXRpb24ubmV4dFggPSBjaGFyYS5wb3NpdGlvbi54XG5cbiAgfSBlbHNlIHtcbiAgICBpZihjaGFyYS5wb3NpdGlvbi54ICA8IGNoYXJYUG9zaXRpb24ubmV4dFgpe1xuICAgICAgLy8gY2hhcmEucG9zaXRpb24ueCArPSAuMVxuICAgICAgLy8gaGVhZC5wb3NpdGlvbi54ICs9LjFcbiAgICAgIC8vIGlmKGNoYXJhLnBvc2l0aW9uLnggPj0gNC44KXtcbiAgICAgIC8vICAgY2hhcmEucG9zaXRpb24ueCA9IDQuOFxuICAgICAgLy8gfVxuICAgICAgaWYoY2hhcmEucG9zaXRpb24ueCA+PSA0Ljgpe1xuXG4gICAgICB9ZWxzZSB7XG4gICAgICAgIGNoYXJhLnBvc2l0aW9uLnggKz0gLjFcbiAgICAgICAgaGVhZC5wb3NpdGlvbi54ICs9LjFcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZihjaGFyYS5wb3NpdGlvbi54ICA+IGNoYXJYUG9zaXRpb24ubmV4dFgpe1xuICAgICAgLy8gY2hhcmEucG9zaXRpb24ueCAtPSAuMVxuICAgICAgLy8gICBoZWFkLnBvc2l0aW9uLnggLT0uMVxuICAgICAgLy8gaWYoY2hhcmEucG9zaXRpb24ueCA8PSAtNC44KXtcbiAgICAgIC8vICAgY2hhcmEucG9zaXRpb24ueCA9IC00LjhcbiAgICAgIC8vIH1cbiAgICAgIGlmKGNoYXJhLnBvc2l0aW9uLnggPD0gLTQuOCl7XG5cbiAgICAgIH1lbHNlIHtcbiAgICAgICAgY2hhcmEucG9zaXRpb24ueCAtPSAuMVxuICAgICAgICBoZWFkLnBvc2l0aW9uLnggLT0uMVxuICAgICAgfVxuXG4gICAgfVxuICB9XG5cblxuXG4gIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTtcbn07XG5cbnJlbmRlcigpO1xudmFyIGRhUmVzaXplID0gZnVuY3Rpb24oKXtcbiAgaGFuZGxlV2luZG93UmVzaXplKGNhbWVyYSwgcmVuZGVyZXIpXG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkYVJlc2l6ZSApXG4iLCIvLyBpbXBvcnQge1NDUkVFTl9XSURUSCxTQ1JFRU5fSEVJR0hULGNhbWVyYSxyZW5kZXJlcn0gZnJvbSAnLi9hcHAuanMnXG5cblxudmFyIGhhbmRsZVdpbmRvd1Jlc2l6ZSA9IGZ1bmN0aW9uKGNhbSwgcmVuZHJyKXtcbiAgbGV0IGNhbWVyYV8gPSBjYW07XG4gIGxldCByZW5kZXJlcl8gPSByZW5kcnJcblxuICBsZXQgbmV3V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCxcbiAgICAgIG5ld0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuICBjYW1lcmFfLmFzcGVjdCA9IG5ld1dpZHRoIC8gbmV3SGVpZ2h0O1xuICBjYW1lcmFfLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbiAgcmVuZGVyZXJfLnNldFNpemUoIG5ld1dpZHRoLCBuZXdIZWlnaHQgKTtcblxuXG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGhhbmRsZVdpbmRvd1Jlc2l6ZVxufVxuIl19
